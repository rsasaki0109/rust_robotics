<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="640" height="640" viewBox="0 0 640 640">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>
  <rect width="100%" height="100%" fill="white"/>
  <text x="320" y="30" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">Robot State Machine</text>
  <line x1="188.5" y1="439.0" x2="145.2" y2="305.7" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="181.2" y="367.7" text-anchor="middle" font-family="Arial" font-size="11" fill="#0066cc">start</text>
  <line x1="247.4" y1="481.8" x2="387.6" y2="481.8" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="317.5" y="496.8" text-anchor="middle" font-family="Arial" font-size="11" fill="#0066cc">emergency</text>
  <line x1="174.8" y1="258.2" x2="460.2" y2="258.2" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="317.5" y="273.2" text-anchor="middle" font-family="Arial" font-size="11" fill="#0066cc">low_battery</text>
  <line x1="143.7" y1="301.0" x2="187.0" y2="434.3" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="151.1" y="372.3" text-anchor="middle" font-family="Arial" font-size="11" fill="#0066cc">stop</text>
  <line x1="473.8" y1="284.6" x2="242.9" y2="452.4" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="349.5" y="356.4" text-anchor="middle" font-family="Arial" font-size="11" fill="#0066cc">charged</text>
  <line x1="283.6" y1="146.5" x2="170.2" y2="228.8" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="218.1" y="175.5" text-anchor="middle" font-family="Arial" font-size="11" fill="#0066cc">clear</text>
  <line x1="166.2" y1="231.7" x2="279.5" y2="149.4" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="231.7" y="202.7" text-anchor="middle" font-family="Arial" font-size="11" fill="#0066cc">obstacle</text>
  <line x1="166.2" y1="284.6" x2="397.1" y2="452.4" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="272.8" y="380.7" text-anchor="middle" font-family="Arial" font-size="11" fill="#0066cc">emergency</text>
  <line x1="392.6" y1="481.8" x2="252.4" y2="481.8" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="322.5" y="466.8" text-anchor="middle" font-family="Arial" font-size="11" fill="#0066cc">reset</text>
  <circle cx="320.0" cy="120.0" r="40" fill="#4682b4" stroke="#2c5574" stroke-width="2"/>
  <text x="320.0" y="120.0" text-anchor="middle" dominant-baseline="middle" font-family="Arial" font-size="12" fill="white" font-weight="bold">avoiding</text>
  <circle cx="510.2" cy="258.2" r="40" fill="#4682b4" stroke="#2c5574" stroke-width="2"/>
  <text x="510.2" y="258.2" text-anchor="middle" dominant-baseline="middle" font-family="Arial" font-size="12" fill="white" font-weight="bold">charging</text>
  <circle cx="437.6" cy="481.8" r="40" fill="#4682b4" stroke="#2c5574" stroke-width="2"/>
  <text x="437.6" y="481.8" text-anchor="middle" dominant-baseline="middle" font-family="Arial" font-size="12" fill="white" font-weight="bold">emergency</text>
  <circle cx="202.4" cy="481.8" r="40" fill="#4682b4" stroke="#2c5574" stroke-width="2"/>
  <text x="202.4" y="481.8" text-anchor="middle" dominant-baseline="middle" font-family="Arial" font-size="12" fill="white" font-weight="bold">idle</text>
  <circle cx="129.8" cy="258.2" r="40" fill="#4682b4" stroke="#2c5574" stroke-width="2"/>
  <text x="129.8" y="258.2" text-anchor="middle" dominant-baseline="middle" font-family="Arial" font-size="12" fill="white" font-weight="bold">moving</text>
  <text x="320" y="625" text-anchor="middle" font-family="Arial" font-size="10" fill="#666">States: circles | Transitions: arrows with event labels</text>
</svg>
